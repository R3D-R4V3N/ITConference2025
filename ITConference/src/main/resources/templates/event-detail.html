<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/springsecurity6">
<head>
    <meta charset="UTF-8" />
    <title th:text="${event.naam}">Event Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-200 font-sans min-h-screen">
<div th:replace="~{nav :: navbar}"></div>
<div th:replace="~{fragments/toast-fragment :: toast-notification}"></div>

<div class="max-w-3xl mx-auto px-4 py-12">
    <div class="relative bg-gray-800 rounded-lg border border-gray-700 p-8 space-y-6">

        <!-- Actieknoppen rechtsboven -->
        <div class="absolute top-4 right-4 flex space-x-2">
            <div sec:authorize="hasRole('ADMIN')">
                <a th:href="@{'/events/edit/' + ${event.id}}"
                   class="text-blue-400 hover:text-blue-300 p-1 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                   title="Event bewerken">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712Z" />
                        <path d="M19.513 8.199l-3.712-3.712L3.651 16.637a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z" />
                    </svg>
                    <span class="sr-only">Bewerken</span>
                </a>
            </div>

            <div sec:authorize="hasRole('USER')">
                <form th:if="${isFavorite}" th:action="@{/favorites/remove}" method="post">
                    <input type="hidden" name="eventId" th:value="${event.id}" />
                    <button type="submit" class="text-yellow-400 hover:text-yellow-300 p-1 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500" title="Verwijder uit favorieten">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006..." clip-rule="evenodd"/>
                        </svg>
                        <span class="sr-only">Verwijder uit favorieten</span>
                    </button>
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                </form>

                <form th:unless="${isFavorite}" th:action="@{/favorites/add}" method="post">
                    <input type="hidden" name="eventId" th:value="${event.id}" />
                    <button type="submit" class="text-gray-400 hover:text-yellow-400 p-1 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500"
                            th:attr="title=${maxFavoritesReached ? 'U heeft het maximale aantal favoriete evenementen bereikt.' : 'Voeg toe aan favorieten'}">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                            <path fill-rule="evenodd" d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006..." clip-rule="evenodd"/>
                        </svg>
                        <span class="sr-only">Voeg toe aan favorieten</span>
                    </button>
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                </form>
            </div>
        </div>

        <h1 class="text-2xl font-bold text-center text-white" th:text="${event.naam}">Event Naam</h1>

        <div class="space-y-4 text-base leading-relaxed">
            <div>
                <span class="font-semibold text-gray-200" th:text="#{eventDetail.beschrijving}">Beschrijving:</span>
                <p class="text-gray-400 mt-1" th:text="${event.beschrijving}"></p>
            </div>

            <div>
                <span class="font-semibold text-gray-200" th:text="#{eventDetail.sprekers}">Spreker(s):</span>
                <p class="text-gray-400 mt-1" th:each="spreker, iterStat : ${event.sprekers}">
                    <span th:text="${spreker.naam}"></span><span th:if="${!iterStat.last}">, </span>
                </p>
            </div>

            <div>
                <span class="font-semibold text-gray-200" th:text="#{eventDetail.lokaal}">Lokaal:</span>
                <p class="text-gray-400 mt-1">
                    <span th:text="${event.lokaal.naam}"></span>
                    <span class="text-gray-500" th:text="#{eventDetail.capaciteit}"> (Capaciteit: </span>
                    <span class="text-gray-400" th:text="${event.lokaal.capaciteit}">100</span><span class="text-gray-500">)</span>
                </p>
            </div>

            <div>
                <span class="font-semibold text-gray-200" th:text="#{eventDetail.datumTijd}">Datum en Tijd:</span>
                <p class="text-gray-400 mt-1" th:text="${#temporals.format(event.datumTijd, #messages.msg('datetime.format.pattern'))}"></p>
            </div>
        </div>

        <div class="pt-6 text-center">
            <a th:href="@{/events}" class="text-sm font-medium text-blue-400 hover:underline">
                <span th:text="#{general.back}">Terug naar overzicht</span>
            </a>
        </div>
    </div>
</div>
</body>
</html>
